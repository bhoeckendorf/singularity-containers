bootstrap: docker
from: archlinux/base

%runscript
    exec /bin/sh "$@"

%post
    #ln -sf /usr/share/zoneinfo/UTC /etc/localtime
    ln -sf /usr/share/zoneinfo/US/Central /etc/localtime

    echo 'en_US.UTF-8 UTF-8' > /etc/locale.gen
    locale-gen
    echo 'LANG=en_US.UTF-8' > /etc/locale.conf

    rm -rf /etc/pacman.d/gnupg
    pacman-key --init
    pacman-key --populate archlinux

    pacman -Syyu --noconfirm

    pacman -S --needed --noconfirm pacman-contrib
    mv /etc/pacman.d/mirrorlist /etc/pacman.d/mirrorlist.bak
    curl -s "https://www.archlinux.org/mirrorlist/?country=US&protocol=https&use_mirror_status=on" | sed -e 's/^#Server/Server/' -e '/^#/d' | rankmirrors -n 5 - > /etc/pacman.d/mirrorlist

    pacman -S --needed --noconfirm \
      bash-completion exa grep htop iputils lsof man-db man-pages mc nano psmisc unzip wget

    mkdir -p /var/cache/pacman/pkg
    yes | pacman -Scc
    rm -rf /var/cache/pacman/pkg
